#
# generate-license-file
# $Id$
# (c) 2006 Norbert Preining
#
# generate a license file from the information in the tpm and the
# file tpm2liclines
#
# Uses tex-common's tpm2licenses
#

pkg="$1"

if ! [ -r debian/$pkg ] ; then
  echo "please first call debian/rules install!"
  exit 1
fi

mkdir -p debian/$pkg/usr/share/doc/$pkg
cat debian/Licenses.header > debian/$pkg.Licenses.gen

if [ -r debian/$pkg.Licenses.add ] ; then
	cat debian/$pkg.Licenses.add >> debian/$pkg.Licenses.gen
fi
perl /usr/share/tex-common/tpm2licenses		\
	--Catalogue=file:./debian/tpm2liclines				\
	--package=texlive						\
	--tpmdir=./debian/$pkg/usr/share/texmf-texlive/tpm		\
	--listallfiles							\
	--texmfPath="./debian/$pkg/usr/share/texmf-texlive ./debian/$pkg/usr/share/doc/$pkg" 2>/dev/null	\
	| sed -e 's,^\./debian/[^/]*/usr,/usr,' >> debian/$pkg.Licenses.gen

mv debian/$pkg.Licenses.gen debian/$pkg/usr/share/doc/$pkg/Licenses

